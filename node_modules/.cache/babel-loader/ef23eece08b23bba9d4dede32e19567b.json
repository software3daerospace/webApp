{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nexports.isEvent = isEvent;\nexports.objectsCollide = objectsCollide;\nexports.getBoundsForNode = getBoundsForNode;\n\nvar _contains = require('dom-helpers/query/contains');\n\nvar _contains2 = _interopRequireDefault(_contains);\n\nvar _closest = require('dom-helpers/query/closest');\n\nvar _closest2 = _interopRequireDefault(_closest);\n\nvar _events = require('dom-helpers/events');\n\nvar _events2 = _interopRequireDefault(_events);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction addEventListener(type, handler) {\n  var target = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : document;\n\n  _events2.default.on(target, type, handler);\n\n  return {\n    remove: function remove() {\n      _events2.default.off(target, type, handler);\n    }\n  };\n}\n\nfunction isOverContainer(container, x, y) {\n  return !container || (0, _contains2.default)(container, document.elementFromPoint(x, y));\n}\n\nfunction isEvent(node, _ref) {\n  var clientX = _ref.clientX,\n      clientY = _ref.clientY;\n  var target = document.elementFromPoint(clientX, clientY);\n  return !!(0, _closest2.default)(target, '.rbc-event', node);\n}\n\nfunction getEventCoordinates(e) {\n  var target = e;\n\n  if (e.touches && e.touches.length) {\n    target = e.touches[0];\n  }\n\n  return {\n    clientX: target.clientX,\n    clientY: target.clientY,\n    pageX: target.pageX,\n    pageY: target.pageY\n  };\n}\n\nvar clickTolerance = 5;\nvar clickInterval = 250;\n\nvar Selection = function () {\n  function Selection(node) {\n    var _ref2 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n        _ref2$global = _ref2.global,\n        global = _ref2$global === undefined ? false : _ref2$global,\n        _ref2$longPressThresh = _ref2.longPressThreshold,\n        longPressThreshold = _ref2$longPressThresh === undefined ? 250 : _ref2$longPressThresh;\n\n    _classCallCheck(this, Selection);\n\n    this.container = node;\n    this.globalMouse = !node || global;\n    this.longPressThreshold = longPressThreshold;\n    this._listeners = Object.create(null);\n    this._handleInitialEvent = this._handleInitialEvent.bind(this);\n    this._handleMoveEvent = this._handleMoveEvent.bind(this);\n    this._handleTerminatingEvent = this._handleTerminatingEvent.bind(this);\n    this._keyListener = this._keyListener.bind(this); // Fixes an iOS 10 bug where scrolling could not be prevented on the window.\n    // https://github.com/metafizzy/flickity/issues/457#issuecomment-254501356\n\n    this._onTouchMoveWindowListener = addEventListener('touchmove', function () {}, window);\n    this._onKeyDownListener = addEventListener('keydown', this._keyListener);\n    this._onKeyUpListener = addEventListener('keyup', this._keyListener);\n\n    this._addInitialEventListener();\n  }\n\n  Selection.prototype.on = function on(type, handler) {\n    var handlers = this._listeners[type] || (this._listeners[type] = []);\n    handlers.push(handler);\n    return {\n      remove: function remove() {\n        var idx = handlers.indexOf(handler);\n        if (idx !== -1) handlers.splice(idx, 1);\n      }\n    };\n  };\n\n  Selection.prototype.emit = function emit(type) {\n    for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    var result = void 0;\n    var handlers = this._listeners[type] || [];\n    handlers.forEach(function (fn) {\n      if (result === undefined) result = fn.apply(undefined, args);\n    });\n    return result;\n  };\n\n  Selection.prototype.teardown = function teardown() {\n    this.listeners = Object.create(null);\n    this._onTouchMoveWindowListener && this._onTouchMoveWindowListener.remove();\n    this._onInitialEventListener && this._onInitialEventListener.remove();\n    this._onEndListener && this._onEndListener.remove();\n    this._onMoveListener && this._onMoveListener.remove();\n    this._onKeyUpListener && this._onKeyUpListener.remove();\n    this._onKeyDownListener && this._onKeyDownListener.remove();\n  };\n\n  Selection.prototype.isSelected = function isSelected(node) {\n    var box = this._selectRect;\n    if (!box || !this.selecting) return false;\n    return objectsCollide(box, getBoundsForNode(node));\n  };\n\n  Selection.prototype.filter = function filter(items) {\n    var box = this._selectRect; //not selecting\n\n    if (!box || !this.selecting) return [];\n    return items.filter(this.isSelected, this);\n  }; // Adds a listener that will call the handler only after the user has pressed on the screen\n  // without moving their finger for 250ms.\n\n\n  Selection.prototype._addLongPressListener = function _addLongPressListener(handler, initialEvent) {\n    var _this = this;\n\n    var timer = null;\n    var touchMoveListener = null;\n    var touchEndListener = null;\n\n    var handleTouchStart = function handleTouchStart(initialEvent) {\n      timer = setTimeout(function () {\n        cleanup();\n        handler(initialEvent);\n      }, _this.longPressThreshold);\n      touchMoveListener = addEventListener('touchmove', function () {\n        return cleanup();\n      });\n      touchEndListener = addEventListener('touchend', function () {\n        return cleanup();\n      });\n    };\n\n    var touchStartListener = addEventListener('touchstart', handleTouchStart);\n\n    var cleanup = function cleanup() {\n      if (timer) {\n        clearTimeout(timer);\n      }\n\n      if (touchMoveListener) {\n        touchMoveListener.remove();\n      }\n\n      if (touchEndListener) {\n        touchEndListener.remove();\n      }\n\n      timer = null;\n      touchMoveListener = null;\n      touchEndListener = null;\n    };\n\n    if (initialEvent) {\n      handleTouchStart(initialEvent);\n    }\n\n    return {\n      remove: function remove() {\n        cleanup();\n        touchStartListener.remove();\n      }\n    };\n  }; // Listen for mousedown and touchstart events. When one is received, disable the other and setup\n  // future event handling based on the type of event.\n\n\n  Selection.prototype._addInitialEventListener = function _addInitialEventListener() {\n    var _this2 = this;\n\n    var mouseDownListener = addEventListener('mousedown', function (e) {\n      _this2._onInitialEventListener.remove();\n\n      _this2._handleInitialEvent(e);\n\n      _this2._onInitialEventListener = addEventListener('mousedown', _this2._handleInitialEvent);\n    });\n    var touchStartListener = addEventListener('touchstart', function (e) {\n      _this2._onInitialEventListener.remove();\n\n      _this2._onInitialEventListener = _this2._addLongPressListener(_this2._handleInitialEvent, e);\n    });\n    this._onInitialEventListener = {\n      remove: function remove() {\n        mouseDownListener.remove();\n        touchStartListener.remove();\n      }\n    };\n  };\n\n  Selection.prototype._handleInitialEvent = function _handleInitialEvent(e) {\n    var _getEventCoordinates = getEventCoordinates(e),\n        clientX = _getEventCoordinates.clientX,\n        clientY = _getEventCoordinates.clientY,\n        pageX = _getEventCoordinates.pageX,\n        pageY = _getEventCoordinates.pageY;\n\n    var node = this.container(),\n        collides = void 0,\n        offsetData = void 0; // Right clicks\n\n    if (e.which === 3 || e.button === 2 || !isOverContainer(node, clientX, clientY)) return;\n\n    if (!this.globalMouse && node && !(0, _contains2.default)(node, e.target)) {\n      var _normalizeDistance = normalizeDistance(0),\n          top = _normalizeDistance.top,\n          left = _normalizeDistance.left,\n          bottom = _normalizeDistance.bottom,\n          right = _normalizeDistance.right;\n\n      offsetData = getBoundsForNode(node);\n      collides = objectsCollide({\n        top: offsetData.top - top,\n        left: offsetData.left - left,\n        bottom: offsetData.bottom + bottom,\n        right: offsetData.right + right\n      }, {\n        top: pageY,\n        left: pageX\n      });\n      if (!collides) return;\n    }\n\n    var result = this.emit('beforeSelect', this._initialEventData = {\n      isTouch: /^touch/.test(e.type),\n      x: pageX,\n      y: pageY,\n      clientX: clientX,\n      clientY: clientY\n    });\n    if (result === false) return;\n\n    switch (e.type) {\n      case 'mousedown':\n        this._onEndListener = addEventListener('mouseup', this._handleTerminatingEvent);\n        this._onMoveListener = addEventListener('mousemove', this._handleMoveEvent);\n        break;\n\n      case 'touchstart':\n        this._handleMoveEvent(e);\n\n        this._onEndListener = addEventListener('touchend', this._handleTerminatingEvent);\n        this._onMoveListener = addEventListener('touchmove', this._handleMoveEvent);\n        break;\n\n      default:\n        break;\n    }\n  };\n\n  Selection.prototype._handleTerminatingEvent = function _handleTerminatingEvent(e) {\n    var _getEventCoordinates2 = getEventCoordinates(e),\n        pageX = _getEventCoordinates2.pageX,\n        pageY = _getEventCoordinates2.pageY;\n\n    this.selecting = false;\n    this._onEndListener && this._onEndListener.remove();\n    this._onMoveListener && this._onMoveListener.remove();\n    if (!this._initialEventData) return;\n    var inRoot = !this.container || (0, _contains2.default)(this.container(), e.target);\n    var bounds = this._selectRect;\n    var click = this.isClick(pageX, pageY);\n    this._initialEventData = null;\n\n    if (click && !inRoot) {\n      return this.emit('reset');\n    }\n\n    if (click && inRoot) {\n      return this._handleClickEvent(e);\n    } // User drag-clicked in the Selectable area\n\n\n    if (!click) return this.emit('select', bounds);\n  };\n\n  Selection.prototype._handleClickEvent = function _handleClickEvent(e) {\n    var _getEventCoordinates3 = getEventCoordinates(e),\n        pageX = _getEventCoordinates3.pageX,\n        pageY = _getEventCoordinates3.pageY,\n        clientX = _getEventCoordinates3.clientX,\n        clientY = _getEventCoordinates3.clientY;\n\n    var now = new Date().getTime();\n\n    if (this._lastClickData && now - this._lastClickData.timestamp < clickInterval) {\n      // Double click event\n      this._lastClickData = null;\n      return this.emit('doubleClick', {\n        x: pageX,\n        y: pageY,\n        clientX: clientX,\n        clientY: clientY\n      });\n    } // Click event\n\n\n    this._lastClickData = {\n      timestamp: now\n    };\n    return this.emit('click', {\n      x: pageX,\n      y: pageY,\n      clientX: clientX,\n      clientY: clientY\n    });\n  };\n\n  Selection.prototype._handleMoveEvent = function _handleMoveEvent(e) {\n    var _initialEventData = this._initialEventData,\n        x = _initialEventData.x,\n        y = _initialEventData.y;\n\n    var _getEventCoordinates4 = getEventCoordinates(e),\n        pageX = _getEventCoordinates4.pageX,\n        pageY = _getEventCoordinates4.pageY;\n\n    var w = Math.abs(x - pageX);\n    var h = Math.abs(y - pageY);\n    var left = Math.min(pageX, x),\n        top = Math.min(pageY, y),\n        old = this.selecting;\n    this.selecting = true;\n    this._selectRect = {\n      top: top,\n      left: left,\n      x: pageX,\n      y: pageY,\n      right: left + w,\n      bottom: top + h\n    };\n\n    if (!old) {\n      this.emit('selectStart', this._initialEventData);\n    }\n\n    if (!this.isClick(pageX, pageY)) this.emit('selecting', this._selectRect);\n    e.preventDefault();\n  };\n\n  Selection.prototype._keyListener = function _keyListener(e) {\n    this.ctrl = e.metaKey || e.ctrlKey;\n  };\n\n  Selection.prototype.isClick = function isClick(pageX, pageY) {\n    var _initialEventData2 = this._initialEventData,\n        x = _initialEventData2.x,\n        y = _initialEventData2.y,\n        isTouch = _initialEventData2.isTouch;\n    return !isTouch && Math.abs(pageX - x) <= clickTolerance && Math.abs(pageY - y) <= clickTolerance;\n  };\n\n  return Selection;\n}();\n/**\n * Resolve the disance prop from either an Int or an Object\n * @return {Object}\n */\n\n\nfunction normalizeDistance() {\n  var distance = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n  if ((typeof distance === 'undefined' ? 'undefined' : _typeof(distance)) !== 'object') distance = {\n    top: distance,\n    left: distance,\n    right: distance,\n    bottom: distance\n  };\n  return distance;\n}\n/**\n * Given two objects containing \"top\", \"left\", \"offsetWidth\" and \"offsetHeight\"\n * properties, determine if they collide.\n * @param  {Object|HTMLElement} a\n * @param  {Object|HTMLElement} b\n * @return {bool}\n */\n\n\nfunction objectsCollide(nodeA, nodeB) {\n  var tolerance = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n\n  var _getBoundsForNode = getBoundsForNode(nodeA),\n      aTop = _getBoundsForNode.top,\n      aLeft = _getBoundsForNode.left,\n      _getBoundsForNode$rig = _getBoundsForNode.right,\n      aRight = _getBoundsForNode$rig === undefined ? aLeft : _getBoundsForNode$rig,\n      _getBoundsForNode$bot = _getBoundsForNode.bottom,\n      aBottom = _getBoundsForNode$bot === undefined ? aTop : _getBoundsForNode$bot;\n\n  var _getBoundsForNode2 = getBoundsForNode(nodeB),\n      bTop = _getBoundsForNode2.top,\n      bLeft = _getBoundsForNode2.left,\n      _getBoundsForNode2$ri = _getBoundsForNode2.right,\n      bRight = _getBoundsForNode2$ri === undefined ? bLeft : _getBoundsForNode2$ri,\n      _getBoundsForNode2$bo = _getBoundsForNode2.bottom,\n      bBottom = _getBoundsForNode2$bo === undefined ? bTop : _getBoundsForNode2$bo;\n\n  return !( // 'a' bottom doesn't touch 'b' top\n  aBottom - tolerance < bTop || // 'a' top doesn't touch 'b' bottom\n  aTop + tolerance > bBottom || // 'a' right doesn't touch 'b' left\n  aRight - tolerance < bLeft || // 'a' left doesn't touch 'b' right\n  aLeft + tolerance > bRight);\n}\n/**\n * Given a node, get everything needed to calculate its boundaries\n * @param  {HTMLElement} node\n * @return {Object}\n */\n\n\nfunction getBoundsForNode(node) {\n  if (!node.getBoundingClientRect) return node;\n  var rect = node.getBoundingClientRect(),\n      left = rect.left + pageOffset('left'),\n      top = rect.top + pageOffset('top');\n  return {\n    top: top,\n    left: left,\n    right: (node.offsetWidth || 0) + left,\n    bottom: (node.offsetHeight || 0) + top\n  };\n}\n\nfunction pageOffset(dir) {\n  if (dir === 'left') return window.pageXOffset || document.body.scrollLeft || 0;\n  if (dir === 'top') return window.pageYOffset || document.body.scrollTop || 0;\n}\n\nexports.default = Selection;","map":{"version":3,"sources":["/home/software/software/app/3daerospace_App/node_modules/react-big-calendar/lib/Selection.js"],"names":["exports","__esModule","_typeof","Symbol","iterator","obj","constructor","prototype","isEvent","objectsCollide","getBoundsForNode","_contains","require","_contains2","_interopRequireDefault","_closest","_closest2","_events","_events2","default","_classCallCheck","instance","Constructor","TypeError","addEventListener","type","handler","target","arguments","length","undefined","document","on","remove","off","isOverContainer","container","x","y","elementFromPoint","node","_ref","clientX","clientY","getEventCoordinates","e","touches","pageX","pageY","clickTolerance","clickInterval","Selection","_ref2","_ref2$global","global","_ref2$longPressThresh","longPressThreshold","globalMouse","_listeners","Object","create","_handleInitialEvent","bind","_handleMoveEvent","_handleTerminatingEvent","_keyListener","_onTouchMoveWindowListener","window","_onKeyDownListener","_onKeyUpListener","_addInitialEventListener","handlers","push","idx","indexOf","splice","emit","_len","args","Array","_key","result","forEach","fn","apply","teardown","listeners","_onInitialEventListener","_onEndListener","_onMoveListener","isSelected","box","_selectRect","selecting","filter","items","_addLongPressListener","initialEvent","_this","timer","touchMoveListener","touchEndListener","handleTouchStart","setTimeout","cleanup","touchStartListener","clearTimeout","_this2","mouseDownListener","_getEventCoordinates","collides","offsetData","which","button","_normalizeDistance","normalizeDistance","top","left","bottom","right","_initialEventData","isTouch","test","_getEventCoordinates2","inRoot","bounds","click","isClick","_handleClickEvent","_getEventCoordinates3","now","Date","getTime","_lastClickData","timestamp","_getEventCoordinates4","w","Math","abs","h","min","old","preventDefault","ctrl","metaKey","ctrlKey","_initialEventData2","distance","nodeA","nodeB","tolerance","_getBoundsForNode","aTop","aLeft","_getBoundsForNode$rig","aRight","_getBoundsForNode$bot","aBottom","_getBoundsForNode2","bTop","bLeft","_getBoundsForNode2$ri","bRight","_getBoundsForNode2$bo","bBottom","getBoundingClientRect","rect","pageOffset","offsetWidth","offsetHeight","dir","pageXOffset","body","scrollLeft","pageYOffset","scrollTop"],"mappings":"AAAA;;AAEAA,OAAO,CAACC,UAAR,GAAqB,IAArB;;AAEA,IAAIC,OAAO,GAAG,OAAOC,MAAP,KAAkB,UAAlB,IAAgC,OAAOA,MAAM,CAACC,QAAd,KAA2B,QAA3D,GAAsE,UAAUC,GAAV,EAAe;AAAE,SAAO,OAAOA,GAAd;AAAoB,CAA3G,GAA8G,UAAUA,GAAV,EAAe;AAAE,SAAOA,GAAG,IAAI,OAAOF,MAAP,KAAkB,UAAzB,IAAuCE,GAAG,CAACC,WAAJ,KAAoBH,MAA3D,IAAqEE,GAAG,KAAKF,MAAM,CAACI,SAApF,GAAgG,QAAhG,GAA2G,OAAOF,GAAzH;AAA+H,CAA5Q;;AAEAL,OAAO,CAACQ,OAAR,GAAkBA,OAAlB;AACAR,OAAO,CAACS,cAAR,GAAyBA,cAAzB;AACAT,OAAO,CAACU,gBAAR,GAA2BA,gBAA3B;;AAEA,IAAIC,SAAS,GAAGC,OAAO,CAAC,4BAAD,CAAvB;;AAEA,IAAIC,UAAU,GAAGC,sBAAsB,CAACH,SAAD,CAAvC;;AAEA,IAAII,QAAQ,GAAGH,OAAO,CAAC,2BAAD,CAAtB;;AAEA,IAAII,SAAS,GAAGF,sBAAsB,CAACC,QAAD,CAAtC;;AAEA,IAAIE,OAAO,GAAGL,OAAO,CAAC,oBAAD,CAArB;;AAEA,IAAIM,QAAQ,GAAGJ,sBAAsB,CAACG,OAAD,CAArC;;AAEA,SAASH,sBAAT,CAAgCT,GAAhC,EAAqC;AAAE,SAAOA,GAAG,IAAIA,GAAG,CAACJ,UAAX,GAAwBI,GAAxB,GAA8B;AAAEc,IAAAA,OAAO,EAAEd;AAAX,GAArC;AAAwD;;AAE/F,SAASe,eAAT,CAAyBC,QAAzB,EAAmCC,WAAnC,EAAgD;AAAE,MAAI,EAAED,QAAQ,YAAYC,WAAtB,CAAJ,EAAwC;AAAE,UAAM,IAAIC,SAAJ,CAAc,mCAAd,CAAN;AAA2D;AAAE;;AAEzJ,SAASC,gBAAT,CAA0BC,IAA1B,EAAgCC,OAAhC,EAAyC;AACvC,MAAIC,MAAM,GAAGC,SAAS,CAACC,MAAV,GAAmB,CAAnB,IAAwBD,SAAS,CAAC,CAAD,CAAT,KAAiBE,SAAzC,GAAqDF,SAAS,CAAC,CAAD,CAA9D,GAAoEG,QAAjF;;AAEAb,EAAAA,QAAQ,CAACC,OAAT,CAAiBa,EAAjB,CAAoBL,MAApB,EAA4BF,IAA5B,EAAkCC,OAAlC;;AACA,SAAO;AACLO,IAAAA,MAAM,EAAE,SAASA,MAAT,GAAkB;AACxBf,MAAAA,QAAQ,CAACC,OAAT,CAAiBe,GAAjB,CAAqBP,MAArB,EAA6BF,IAA7B,EAAmCC,OAAnC;AACD;AAHI,GAAP;AAKD;;AAED,SAASS,eAAT,CAAyBC,SAAzB,EAAoCC,CAApC,EAAuCC,CAAvC,EAA0C;AACxC,SAAO,CAACF,SAAD,IAAc,CAAC,GAAGvB,UAAU,CAACM,OAAf,EAAwBiB,SAAxB,EAAmCL,QAAQ,CAACQ,gBAAT,CAA0BF,CAA1B,EAA6BC,CAA7B,CAAnC,CAArB;AACD;;AAED,SAAS9B,OAAT,CAAiBgC,IAAjB,EAAuBC,IAAvB,EAA6B;AAC3B,MAAIC,OAAO,GAAGD,IAAI,CAACC,OAAnB;AAAA,MACIC,OAAO,GAAGF,IAAI,CAACE,OADnB;AAGA,MAAIhB,MAAM,GAAGI,QAAQ,CAACQ,gBAAT,CAA0BG,OAA1B,EAAmCC,OAAnC,CAAb;AACA,SAAO,CAAC,CAAC,CAAC,GAAG3B,SAAS,CAACG,OAAd,EAAuBQ,MAAvB,EAA+B,YAA/B,EAA6Ca,IAA7C,CAAT;AACD;;AAED,SAASI,mBAAT,CAA6BC,CAA7B,EAAgC;AAC9B,MAAIlB,MAAM,GAAGkB,CAAb;;AAEA,MAAIA,CAAC,CAACC,OAAF,IAAaD,CAAC,CAACC,OAAF,CAAUjB,MAA3B,EAAmC;AACjCF,IAAAA,MAAM,GAAGkB,CAAC,CAACC,OAAF,CAAU,CAAV,CAAT;AACD;;AAED,SAAO;AACLJ,IAAAA,OAAO,EAAEf,MAAM,CAACe,OADX;AAELC,IAAAA,OAAO,EAAEhB,MAAM,CAACgB,OAFX;AAGLI,IAAAA,KAAK,EAAEpB,MAAM,CAACoB,KAHT;AAILC,IAAAA,KAAK,EAAErB,MAAM,CAACqB;AAJT,GAAP;AAMD;;AAED,IAAIC,cAAc,GAAG,CAArB;AACA,IAAIC,aAAa,GAAG,GAApB;;AAEA,IAAIC,SAAS,GAAG,YAAY;AAC1B,WAASA,SAAT,CAAmBX,IAAnB,EAAyB;AACvB,QAAIY,KAAK,GAAGxB,SAAS,CAACC,MAAV,GAAmB,CAAnB,IAAwBD,SAAS,CAAC,CAAD,CAAT,KAAiBE,SAAzC,GAAqDF,SAAS,CAAC,CAAD,CAA9D,GAAoE,EAAhF;AAAA,QACIyB,YAAY,GAAGD,KAAK,CAACE,MADzB;AAAA,QAEIA,MAAM,GAAGD,YAAY,KAAKvB,SAAjB,GAA6B,KAA7B,GAAqCuB,YAFlD;AAAA,QAGIE,qBAAqB,GAAGH,KAAK,CAACI,kBAHlC;AAAA,QAIIA,kBAAkB,GAAGD,qBAAqB,KAAKzB,SAA1B,GAAsC,GAAtC,GAA4CyB,qBAJrE;;AAMAnC,IAAAA,eAAe,CAAC,IAAD,EAAO+B,SAAP,CAAf;;AAEA,SAAKf,SAAL,GAAiBI,IAAjB;AACA,SAAKiB,WAAL,GAAmB,CAACjB,IAAD,IAASc,MAA5B;AACA,SAAKE,kBAAL,GAA0BA,kBAA1B;AAEA,SAAKE,UAAL,GAAkBC,MAAM,CAACC,MAAP,CAAc,IAAd,CAAlB;AAEA,SAAKC,mBAAL,GAA2B,KAAKA,mBAAL,CAAyBC,IAAzB,CAA8B,IAA9B,CAA3B;AACA,SAAKC,gBAAL,GAAwB,KAAKA,gBAAL,CAAsBD,IAAtB,CAA2B,IAA3B,CAAxB;AACA,SAAKE,uBAAL,GAA+B,KAAKA,uBAAL,CAA6BF,IAA7B,CAAkC,IAAlC,CAA/B;AACA,SAAKG,YAAL,GAAoB,KAAKA,YAAL,CAAkBH,IAAlB,CAAuB,IAAvB,CAApB,CAlBuB,CAoBvB;AACA;;AACA,SAAKI,0BAAL,GAAkC1C,gBAAgB,CAAC,WAAD,EAAc,YAAY,CAAE,CAA5B,EAA8B2C,MAA9B,CAAlD;AACA,SAAKC,kBAAL,GAA0B5C,gBAAgB,CAAC,SAAD,EAAY,KAAKyC,YAAjB,CAA1C;AACA,SAAKI,gBAAL,GAAwB7C,gBAAgB,CAAC,OAAD,EAAU,KAAKyC,YAAf,CAAxC;;AACA,SAAKK,wBAAL;AACD;;AAEDnB,EAAAA,SAAS,CAAC5C,SAAV,CAAoByB,EAApB,GAAyB,SAASA,EAAT,CAAYP,IAAZ,EAAkBC,OAAlB,EAA2B;AAClD,QAAI6C,QAAQ,GAAG,KAAKb,UAAL,CAAgBjC,IAAhB,MAA0B,KAAKiC,UAAL,CAAgBjC,IAAhB,IAAwB,EAAlD,CAAf;AAEA8C,IAAAA,QAAQ,CAACC,IAAT,CAAc9C,OAAd;AAEA,WAAO;AACLO,MAAAA,MAAM,EAAE,SAASA,MAAT,GAAkB;AACxB,YAAIwC,GAAG,GAAGF,QAAQ,CAACG,OAAT,CAAiBhD,OAAjB,CAAV;AACA,YAAI+C,GAAG,KAAK,CAAC,CAAb,EAAgBF,QAAQ,CAACI,MAAT,CAAgBF,GAAhB,EAAqB,CAArB;AACjB;AAJI,KAAP;AAMD,GAXD;;AAaAtB,EAAAA,SAAS,CAAC5C,SAAV,CAAoBqE,IAApB,GAA2B,SAASA,IAAT,CAAcnD,IAAd,EAAoB;AAC7C,SAAK,IAAIoD,IAAI,GAAGjD,SAAS,CAACC,MAArB,EAA6BiD,IAAI,GAAGC,KAAK,CAACF,IAAI,GAAG,CAAP,GAAWA,IAAI,GAAG,CAAlB,GAAsB,CAAvB,CAAzC,EAAoEG,IAAI,GAAG,CAAhF,EAAmFA,IAAI,GAAGH,IAA1F,EAAgGG,IAAI,EAApG,EAAwG;AACtGF,MAAAA,IAAI,CAACE,IAAI,GAAG,CAAR,CAAJ,GAAiBpD,SAAS,CAACoD,IAAD,CAA1B;AACD;;AAED,QAAIC,MAAM,GAAG,KAAK,CAAlB;AACA,QAAIV,QAAQ,GAAG,KAAKb,UAAL,CAAgBjC,IAAhB,KAAyB,EAAxC;AACA8C,IAAAA,QAAQ,CAACW,OAAT,CAAiB,UAAUC,EAAV,EAAc;AAC7B,UAAIF,MAAM,KAAKnD,SAAf,EAA0BmD,MAAM,GAAGE,EAAE,CAACC,KAAH,CAAStD,SAAT,EAAoBgD,IAApB,CAAT;AAC3B,KAFD;AAGA,WAAOG,MAAP;AACD,GAXD;;AAaA9B,EAAAA,SAAS,CAAC5C,SAAV,CAAoB8E,QAApB,GAA+B,SAASA,QAAT,GAAoB;AACjD,SAAKC,SAAL,GAAiB3B,MAAM,CAACC,MAAP,CAAc,IAAd,CAAjB;AACA,SAAKM,0BAAL,IAAmC,KAAKA,0BAAL,CAAgCjC,MAAhC,EAAnC;AACA,SAAKsD,uBAAL,IAAgC,KAAKA,uBAAL,CAA6BtD,MAA7B,EAAhC;AACA,SAAKuD,cAAL,IAAuB,KAAKA,cAAL,CAAoBvD,MAApB,EAAvB;AACA,SAAKwD,eAAL,IAAwB,KAAKA,eAAL,CAAqBxD,MAArB,EAAxB;AACA,SAAKoC,gBAAL,IAAyB,KAAKA,gBAAL,CAAsBpC,MAAtB,EAAzB;AACA,SAAKmC,kBAAL,IAA2B,KAAKA,kBAAL,CAAwBnC,MAAxB,EAA3B;AACD,GARD;;AAUAkB,EAAAA,SAAS,CAAC5C,SAAV,CAAoBmF,UAApB,GAAiC,SAASA,UAAT,CAAoBlD,IAApB,EAA0B;AACzD,QAAImD,GAAG,GAAG,KAAKC,WAAf;AAEA,QAAI,CAACD,GAAD,IAAQ,CAAC,KAAKE,SAAlB,EAA6B,OAAO,KAAP;AAE7B,WAAOpF,cAAc,CAACkF,GAAD,EAAMjF,gBAAgB,CAAC8B,IAAD,CAAtB,CAArB;AACD,GAND;;AAQAW,EAAAA,SAAS,CAAC5C,SAAV,CAAoBuF,MAApB,GAA6B,SAASA,MAAT,CAAgBC,KAAhB,EAAuB;AAClD,QAAIJ,GAAG,GAAG,KAAKC,WAAf,CADkD,CAGlD;;AACA,QAAI,CAACD,GAAD,IAAQ,CAAC,KAAKE,SAAlB,EAA6B,OAAO,EAAP;AAE7B,WAAOE,KAAK,CAACD,MAAN,CAAa,KAAKJ,UAAlB,EAA8B,IAA9B,CAAP;AACD,GAPD,CAzE0B,CAkF1B;AACA;;;AAGAvC,EAAAA,SAAS,CAAC5C,SAAV,CAAoByF,qBAApB,GAA4C,SAASA,qBAAT,CAA+BtE,OAA/B,EAAwCuE,YAAxC,EAAsD;AAChG,QAAIC,KAAK,GAAG,IAAZ;;AAEA,QAAIC,KAAK,GAAG,IAAZ;AACA,QAAIC,iBAAiB,GAAG,IAAxB;AACA,QAAIC,gBAAgB,GAAG,IAAvB;;AACA,QAAIC,gBAAgB,GAAG,SAASA,gBAAT,CAA0BL,YAA1B,EAAwC;AAC7DE,MAAAA,KAAK,GAAGI,UAAU,CAAC,YAAY;AAC7BC,QAAAA,OAAO;AACP9E,QAAAA,OAAO,CAACuE,YAAD,CAAP;AACD,OAHiB,EAGfC,KAAK,CAAC1C,kBAHS,CAAlB;AAIA4C,MAAAA,iBAAiB,GAAG5E,gBAAgB,CAAC,WAAD,EAAc,YAAY;AAC5D,eAAOgF,OAAO,EAAd;AACD,OAFmC,CAApC;AAGAH,MAAAA,gBAAgB,GAAG7E,gBAAgB,CAAC,UAAD,EAAa,YAAY;AAC1D,eAAOgF,OAAO,EAAd;AACD,OAFkC,CAAnC;AAGD,KAXD;;AAYA,QAAIC,kBAAkB,GAAGjF,gBAAgB,CAAC,YAAD,EAAe8E,gBAAf,CAAzC;;AACA,QAAIE,OAAO,GAAG,SAASA,OAAT,GAAmB;AAC/B,UAAIL,KAAJ,EAAW;AACTO,QAAAA,YAAY,CAACP,KAAD,CAAZ;AACD;;AACD,UAAIC,iBAAJ,EAAuB;AACrBA,QAAAA,iBAAiB,CAACnE,MAAlB;AACD;;AACD,UAAIoE,gBAAJ,EAAsB;AACpBA,QAAAA,gBAAgB,CAACpE,MAAjB;AACD;;AAEDkE,MAAAA,KAAK,GAAG,IAAR;AACAC,MAAAA,iBAAiB,GAAG,IAApB;AACAC,MAAAA,gBAAgB,GAAG,IAAnB;AACD,KAdD;;AAgBA,QAAIJ,YAAJ,EAAkB;AAChBK,MAAAA,gBAAgB,CAACL,YAAD,CAAhB;AACD;;AAED,WAAO;AACLhE,MAAAA,MAAM,EAAE,SAASA,MAAT,GAAkB;AACxBuE,QAAAA,OAAO;AACPC,QAAAA,kBAAkB,CAACxE,MAAnB;AACD;AAJI,KAAP;AAMD,GA7CD,CAtF0B,CAqI1B;AACA;;;AAGAkB,EAAAA,SAAS,CAAC5C,SAAV,CAAoB+D,wBAApB,GAA+C,SAASA,wBAAT,GAAoC;AACjF,QAAIqC,MAAM,GAAG,IAAb;;AAEA,QAAIC,iBAAiB,GAAGpF,gBAAgB,CAAC,WAAD,EAAc,UAAUqB,CAAV,EAAa;AACjE8D,MAAAA,MAAM,CAACpB,uBAAP,CAA+BtD,MAA/B;;AACA0E,MAAAA,MAAM,CAAC9C,mBAAP,CAA2BhB,CAA3B;;AACA8D,MAAAA,MAAM,CAACpB,uBAAP,GAAiC/D,gBAAgB,CAAC,WAAD,EAAcmF,MAAM,CAAC9C,mBAArB,CAAjD;AACD,KAJuC,CAAxC;AAKA,QAAI4C,kBAAkB,GAAGjF,gBAAgB,CAAC,YAAD,EAAe,UAAUqB,CAAV,EAAa;AACnE8D,MAAAA,MAAM,CAACpB,uBAAP,CAA+BtD,MAA/B;;AACA0E,MAAAA,MAAM,CAACpB,uBAAP,GAAiCoB,MAAM,CAACX,qBAAP,CAA6BW,MAAM,CAAC9C,mBAApC,EAAyDhB,CAAzD,CAAjC;AACD,KAHwC,CAAzC;AAKA,SAAK0C,uBAAL,GAA+B;AAC7BtD,MAAAA,MAAM,EAAE,SAASA,MAAT,GAAkB;AACxB2E,QAAAA,iBAAiB,CAAC3E,MAAlB;AACAwE,QAAAA,kBAAkB,CAACxE,MAAnB;AACD;AAJ4B,KAA/B;AAMD,GAnBD;;AAqBAkB,EAAAA,SAAS,CAAC5C,SAAV,CAAoBsD,mBAApB,GAA0C,SAASA,mBAAT,CAA6BhB,CAA7B,EAAgC;AACxE,QAAIgE,oBAAoB,GAAGjE,mBAAmB,CAACC,CAAD,CAA9C;AAAA,QACIH,OAAO,GAAGmE,oBAAoB,CAACnE,OADnC;AAAA,QAEIC,OAAO,GAAGkE,oBAAoB,CAAClE,OAFnC;AAAA,QAGII,KAAK,GAAG8D,oBAAoB,CAAC9D,KAHjC;AAAA,QAIIC,KAAK,GAAG6D,oBAAoB,CAAC7D,KAJjC;;AAMA,QAAIR,IAAI,GAAG,KAAKJ,SAAL,EAAX;AAAA,QACI0E,QAAQ,GAAG,KAAK,CADpB;AAAA,QAEIC,UAAU,GAAG,KAAK,CAFtB,CAPwE,CAWxE;;AACA,QAAIlE,CAAC,CAACmE,KAAF,KAAY,CAAZ,IAAiBnE,CAAC,CAACoE,MAAF,KAAa,CAA9B,IAAmC,CAAC9E,eAAe,CAACK,IAAD,EAAOE,OAAP,EAAgBC,OAAhB,CAAvD,EAAiF;;AAEjF,QAAI,CAAC,KAAKc,WAAN,IAAqBjB,IAArB,IAA6B,CAAC,CAAC,GAAG3B,UAAU,CAACM,OAAf,EAAwBqB,IAAxB,EAA8BK,CAAC,CAAClB,MAAhC,CAAlC,EAA2E;AACzE,UAAIuF,kBAAkB,GAAGC,iBAAiB,CAAC,CAAD,CAA1C;AAAA,UACIC,GAAG,GAAGF,kBAAkB,CAACE,GAD7B;AAAA,UAEIC,IAAI,GAAGH,kBAAkB,CAACG,IAF9B;AAAA,UAGIC,MAAM,GAAGJ,kBAAkB,CAACI,MAHhC;AAAA,UAIIC,KAAK,GAAGL,kBAAkB,CAACK,KAJ/B;;AAMAR,MAAAA,UAAU,GAAGrG,gBAAgB,CAAC8B,IAAD,CAA7B;AAEAsE,MAAAA,QAAQ,GAAGrG,cAAc,CAAC;AACxB2G,QAAAA,GAAG,EAAEL,UAAU,CAACK,GAAX,GAAiBA,GADE;AAExBC,QAAAA,IAAI,EAAEN,UAAU,CAACM,IAAX,GAAkBA,IAFA;AAGxBC,QAAAA,MAAM,EAAEP,UAAU,CAACO,MAAX,GAAoBA,MAHJ;AAIxBC,QAAAA,KAAK,EAAER,UAAU,CAACQ,KAAX,GAAmBA;AAJF,OAAD,EAKtB;AAAEH,QAAAA,GAAG,EAAEpE,KAAP;AAAcqE,QAAAA,IAAI,EAAEtE;AAApB,OALsB,CAAzB;AAOA,UAAI,CAAC+D,QAAL,EAAe;AAChB;;AAED,QAAI7B,MAAM,GAAG,KAAKL,IAAL,CAAU,cAAV,EAA0B,KAAK4C,iBAAL,GAAyB;AAC9DC,MAAAA,OAAO,EAAE,SAASC,IAAT,CAAc7E,CAAC,CAACpB,IAAhB,CADqD;AAE9DY,MAAAA,CAAC,EAAEU,KAF2D;AAG9DT,MAAAA,CAAC,EAAEU,KAH2D;AAI9DN,MAAAA,OAAO,EAAEA,OAJqD;AAK9DC,MAAAA,OAAO,EAAEA;AALqD,KAAnD,CAAb;AAQA,QAAIsC,MAAM,KAAK,KAAf,EAAsB;;AAEtB,YAAQpC,CAAC,CAACpB,IAAV;AACE,WAAK,WAAL;AACE,aAAK+D,cAAL,GAAsBhE,gBAAgB,CAAC,SAAD,EAAY,KAAKwC,uBAAjB,CAAtC;AACA,aAAKyB,eAAL,GAAuBjE,gBAAgB,CAAC,WAAD,EAAc,KAAKuC,gBAAnB,CAAvC;AACA;;AACF,WAAK,YAAL;AACE,aAAKA,gBAAL,CAAsBlB,CAAtB;;AACA,aAAK2C,cAAL,GAAsBhE,gBAAgB,CAAC,UAAD,EAAa,KAAKwC,uBAAlB,CAAtC;AACA,aAAKyB,eAAL,GAAuBjE,gBAAgB,CAAC,WAAD,EAAc,KAAKuC,gBAAnB,CAAvC;AACA;;AACF;AACE;AAXJ;AAaD,GAxDD;;AA0DAZ,EAAAA,SAAS,CAAC5C,SAAV,CAAoByD,uBAApB,GAA8C,SAASA,uBAAT,CAAiCnB,CAAjC,EAAoC;AAChF,QAAI8E,qBAAqB,GAAG/E,mBAAmB,CAACC,CAAD,CAA/C;AAAA,QACIE,KAAK,GAAG4E,qBAAqB,CAAC5E,KADlC;AAAA,QAEIC,KAAK,GAAG2E,qBAAqB,CAAC3E,KAFlC;;AAIA,SAAK6C,SAAL,GAAiB,KAAjB;AAEA,SAAKL,cAAL,IAAuB,KAAKA,cAAL,CAAoBvD,MAApB,EAAvB;AACA,SAAKwD,eAAL,IAAwB,KAAKA,eAAL,CAAqBxD,MAArB,EAAxB;AAEA,QAAI,CAAC,KAAKuF,iBAAV,EAA6B;AAE7B,QAAII,MAAM,GAAG,CAAC,KAAKxF,SAAN,IAAmB,CAAC,GAAGvB,UAAU,CAACM,OAAf,EAAwB,KAAKiB,SAAL,EAAxB,EAA0CS,CAAC,CAAClB,MAA5C,CAAhC;AACA,QAAIkG,MAAM,GAAG,KAAKjC,WAAlB;AACA,QAAIkC,KAAK,GAAG,KAAKC,OAAL,CAAahF,KAAb,EAAoBC,KAApB,CAAZ;AAEA,SAAKwE,iBAAL,GAAyB,IAAzB;;AAEA,QAAIM,KAAK,IAAI,CAACF,MAAd,EAAsB;AACpB,aAAO,KAAKhD,IAAL,CAAU,OAAV,CAAP;AACD;;AAED,QAAIkD,KAAK,IAAIF,MAAb,EAAqB;AACnB,aAAO,KAAKI,iBAAL,CAAuBnF,CAAvB,CAAP;AACD,KAxB+E,CA0BhF;;;AACA,QAAI,CAACiF,KAAL,EAAY,OAAO,KAAKlD,IAAL,CAAU,QAAV,EAAoBiD,MAApB,CAAP;AACb,GA5BD;;AA8BA1E,EAAAA,SAAS,CAAC5C,SAAV,CAAoByH,iBAApB,GAAwC,SAASA,iBAAT,CAA2BnF,CAA3B,EAA8B;AACpE,QAAIoF,qBAAqB,GAAGrF,mBAAmB,CAACC,CAAD,CAA/C;AAAA,QACIE,KAAK,GAAGkF,qBAAqB,CAAClF,KADlC;AAAA,QAEIC,KAAK,GAAGiF,qBAAqB,CAACjF,KAFlC;AAAA,QAGIN,OAAO,GAAGuF,qBAAqB,CAACvF,OAHpC;AAAA,QAIIC,OAAO,GAAGsF,qBAAqB,CAACtF,OAJpC;;AAMA,QAAIuF,GAAG,GAAG,IAAIC,IAAJ,GAAWC,OAAX,EAAV;;AAEA,QAAI,KAAKC,cAAL,IAAuBH,GAAG,GAAG,KAAKG,cAAL,CAAoBC,SAA1B,GAAsCpF,aAAjE,EAAgF;AAC9E;AACA,WAAKmF,cAAL,GAAsB,IAAtB;AACA,aAAO,KAAKzD,IAAL,CAAU,aAAV,EAAyB;AAC9BvC,QAAAA,CAAC,EAAEU,KAD2B;AAE9BT,QAAAA,CAAC,EAAEU,KAF2B;AAG9BN,QAAAA,OAAO,EAAEA,OAHqB;AAI9BC,QAAAA,OAAO,EAAEA;AAJqB,OAAzB,CAAP;AAMD,KAlBmE,CAoBpE;;;AACA,SAAK0F,cAAL,GAAsB;AACpBC,MAAAA,SAAS,EAAEJ;AADS,KAAtB;AAGA,WAAO,KAAKtD,IAAL,CAAU,OAAV,EAAmB;AACxBvC,MAAAA,CAAC,EAAEU,KADqB;AAExBT,MAAAA,CAAC,EAAEU,KAFqB;AAGxBN,MAAAA,OAAO,EAAEA,OAHe;AAIxBC,MAAAA,OAAO,EAAEA;AAJe,KAAnB,CAAP;AAMD,GA9BD;;AAgCAQ,EAAAA,SAAS,CAAC5C,SAAV,CAAoBwD,gBAApB,GAAuC,SAASA,gBAAT,CAA0BlB,CAA1B,EAA6B;AAClE,QAAI2E,iBAAiB,GAAG,KAAKA,iBAA7B;AAAA,QACInF,CAAC,GAAGmF,iBAAiB,CAACnF,CAD1B;AAAA,QAEIC,CAAC,GAAGkF,iBAAiB,CAAClF,CAF1B;;AAIA,QAAIiG,qBAAqB,GAAG3F,mBAAmB,CAACC,CAAD,CAA/C;AAAA,QACIE,KAAK,GAAGwF,qBAAqB,CAACxF,KADlC;AAAA,QAEIC,KAAK,GAAGuF,qBAAqB,CAACvF,KAFlC;;AAIA,QAAIwF,CAAC,GAAGC,IAAI,CAACC,GAAL,CAASrG,CAAC,GAAGU,KAAb,CAAR;AACA,QAAI4F,CAAC,GAAGF,IAAI,CAACC,GAAL,CAASpG,CAAC,GAAGU,KAAb,CAAR;AAEA,QAAIqE,IAAI,GAAGoB,IAAI,CAACG,GAAL,CAAS7F,KAAT,EAAgBV,CAAhB,CAAX;AAAA,QACI+E,GAAG,GAAGqB,IAAI,CAACG,GAAL,CAAS5F,KAAT,EAAgBV,CAAhB,CADV;AAAA,QAEIuG,GAAG,GAAG,KAAKhD,SAFf;AAIA,SAAKA,SAAL,GAAiB,IAAjB;AACA,SAAKD,WAAL,GAAmB;AACjBwB,MAAAA,GAAG,EAAEA,GADY;AAEjBC,MAAAA,IAAI,EAAEA,IAFW;AAGjBhF,MAAAA,CAAC,EAAEU,KAHc;AAIjBT,MAAAA,CAAC,EAAEU,KAJc;AAKjBuE,MAAAA,KAAK,EAAEF,IAAI,GAAGmB,CALG;AAMjBlB,MAAAA,MAAM,EAAEF,GAAG,GAAGuB;AANG,KAAnB;;AASA,QAAI,CAACE,GAAL,EAAU;AACR,WAAKjE,IAAL,CAAU,aAAV,EAAyB,KAAK4C,iBAA9B;AACD;;AAED,QAAI,CAAC,KAAKO,OAAL,CAAahF,KAAb,EAAoBC,KAApB,CAAL,EAAiC,KAAK4B,IAAL,CAAU,WAAV,EAAuB,KAAKgB,WAA5B;AAEjC/C,IAAAA,CAAC,CAACiG,cAAF;AACD,GAjCD;;AAmCA3F,EAAAA,SAAS,CAAC5C,SAAV,CAAoB0D,YAApB,GAAmC,SAASA,YAAT,CAAsBpB,CAAtB,EAAyB;AAC1D,SAAKkG,IAAL,GAAYlG,CAAC,CAACmG,OAAF,IAAanG,CAAC,CAACoG,OAA3B;AACD,GAFD;;AAIA9F,EAAAA,SAAS,CAAC5C,SAAV,CAAoBwH,OAApB,GAA8B,SAASA,OAAT,CAAiBhF,KAAjB,EAAwBC,KAAxB,EAA+B;AAC3D,QAAIkG,kBAAkB,GAAG,KAAK1B,iBAA9B;AAAA,QACInF,CAAC,GAAG6G,kBAAkB,CAAC7G,CAD3B;AAAA,QAEIC,CAAC,GAAG4G,kBAAkB,CAAC5G,CAF3B;AAAA,QAGImF,OAAO,GAAGyB,kBAAkB,CAACzB,OAHjC;AAKA,WAAO,CAACA,OAAD,IAAYgB,IAAI,CAACC,GAAL,CAAS3F,KAAK,GAAGV,CAAjB,KAAuBY,cAAnC,IAAqDwF,IAAI,CAACC,GAAL,CAAS1F,KAAK,GAAGV,CAAjB,KAAuBW,cAAnF;AACD,GAPD;;AASA,SAAOE,SAAP;AACD,CAvUe,EAAhB;AAyUA;AACA;AACA;AACA;;;AAGA,SAASgE,iBAAT,GAA6B;AAC3B,MAAIgC,QAAQ,GAAGvH,SAAS,CAACC,MAAV,GAAmB,CAAnB,IAAwBD,SAAS,CAAC,CAAD,CAAT,KAAiBE,SAAzC,GAAqDF,SAAS,CAAC,CAAD,CAA9D,GAAoE,CAAnF;AAEA,MAAI,CAAC,OAAOuH,QAAP,KAAoB,WAApB,GAAkC,WAAlC,GAAgDjJ,OAAO,CAACiJ,QAAD,CAAxD,MAAwE,QAA5E,EAAsFA,QAAQ,GAAG;AAC/F/B,IAAAA,GAAG,EAAE+B,QAD0F;AAE/F9B,IAAAA,IAAI,EAAE8B,QAFyF;AAG/F5B,IAAAA,KAAK,EAAE4B,QAHwF;AAI/F7B,IAAAA,MAAM,EAAE6B;AAJuF,GAAX;AAOtF,SAAOA,QAAP;AACD;AAED;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAAS1I,cAAT,CAAwB2I,KAAxB,EAA+BC,KAA/B,EAAsC;AACpC,MAAIC,SAAS,GAAG1H,SAAS,CAACC,MAAV,GAAmB,CAAnB,IAAwBD,SAAS,CAAC,CAAD,CAAT,KAAiBE,SAAzC,GAAqDF,SAAS,CAAC,CAAD,CAA9D,GAAoE,CAApF;;AAEA,MAAI2H,iBAAiB,GAAG7I,gBAAgB,CAAC0I,KAAD,CAAxC;AAAA,MACII,IAAI,GAAGD,iBAAiB,CAACnC,GAD7B;AAAA,MAEIqC,KAAK,GAAGF,iBAAiB,CAAClC,IAF9B;AAAA,MAGIqC,qBAAqB,GAAGH,iBAAiB,CAAChC,KAH9C;AAAA,MAIIoC,MAAM,GAAGD,qBAAqB,KAAK5H,SAA1B,GAAsC2H,KAAtC,GAA8CC,qBAJ3D;AAAA,MAKIE,qBAAqB,GAAGL,iBAAiB,CAACjC,MAL9C;AAAA,MAMIuC,OAAO,GAAGD,qBAAqB,KAAK9H,SAA1B,GAAsC0H,IAAtC,GAA6CI,qBAN3D;;AAQA,MAAIE,kBAAkB,GAAGpJ,gBAAgB,CAAC2I,KAAD,CAAzC;AAAA,MACIU,IAAI,GAAGD,kBAAkB,CAAC1C,GAD9B;AAAA,MAEI4C,KAAK,GAAGF,kBAAkB,CAACzC,IAF/B;AAAA,MAGI4C,qBAAqB,GAAGH,kBAAkB,CAACvC,KAH/C;AAAA,MAII2C,MAAM,GAAGD,qBAAqB,KAAKnI,SAA1B,GAAsCkI,KAAtC,GAA8CC,qBAJ3D;AAAA,MAKIE,qBAAqB,GAAGL,kBAAkB,CAACxC,MAL/C;AAAA,MAMI8C,OAAO,GAAGD,qBAAqB,KAAKrI,SAA1B,GAAsCiI,IAAtC,GAA6CI,qBAN3D;;AAQA,SAAO,GAAG;AACVN,EAAAA,OAAO,GAAGP,SAAV,GAAsBS,IAAtB,IACA;AACAP,EAAAA,IAAI,GAAGF,SAAP,GAAmBc,OAFnB,IAGA;AACAT,EAAAA,MAAM,GAAGL,SAAT,GAAqBU,KAJrB,IAKA;AACAP,EAAAA,KAAK,GAAGH,SAAR,GAAoBY,MAPb,CAAP;AAQD;AAED;AACA;AACA;AACA;AACA;;;AACA,SAASxJ,gBAAT,CAA0B8B,IAA1B,EAAgC;AAC9B,MAAI,CAACA,IAAI,CAAC6H,qBAAV,EAAiC,OAAO7H,IAAP;AAEjC,MAAI8H,IAAI,GAAG9H,IAAI,CAAC6H,qBAAL,EAAX;AAAA,MACIhD,IAAI,GAAGiD,IAAI,CAACjD,IAAL,GAAYkD,UAAU,CAAC,MAAD,CADjC;AAAA,MAEInD,GAAG,GAAGkD,IAAI,CAAClD,GAAL,GAAWmD,UAAU,CAAC,KAAD,CAF/B;AAIA,SAAO;AACLnD,IAAAA,GAAG,EAAEA,GADA;AAELC,IAAAA,IAAI,EAAEA,IAFD;AAGLE,IAAAA,KAAK,EAAE,CAAC/E,IAAI,CAACgI,WAAL,IAAoB,CAArB,IAA0BnD,IAH5B;AAILC,IAAAA,MAAM,EAAE,CAAC9E,IAAI,CAACiI,YAAL,IAAqB,CAAtB,IAA2BrD;AAJ9B,GAAP;AAMD;;AAED,SAASmD,UAAT,CAAoBG,GAApB,EAAyB;AACvB,MAAIA,GAAG,KAAK,MAAZ,EAAoB,OAAOvG,MAAM,CAACwG,WAAP,IAAsB5I,QAAQ,CAAC6I,IAAT,CAAcC,UAApC,IAAkD,CAAzD;AACpB,MAAIH,GAAG,KAAK,KAAZ,EAAmB,OAAOvG,MAAM,CAAC2G,WAAP,IAAsB/I,QAAQ,CAAC6I,IAAT,CAAcG,SAApC,IAAiD,CAAxD;AACpB;;AACD/K,OAAO,CAACmB,OAAR,GAAkBgC,SAAlB","sourcesContent":["'use strict';\n\nexports.__esModule = true;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nexports.isEvent = isEvent;\nexports.objectsCollide = objectsCollide;\nexports.getBoundsForNode = getBoundsForNode;\n\nvar _contains = require('dom-helpers/query/contains');\n\nvar _contains2 = _interopRequireDefault(_contains);\n\nvar _closest = require('dom-helpers/query/closest');\n\nvar _closest2 = _interopRequireDefault(_closest);\n\nvar _events = require('dom-helpers/events');\n\nvar _events2 = _interopRequireDefault(_events);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction addEventListener(type, handler) {\n  var target = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : document;\n\n  _events2.default.on(target, type, handler);\n  return {\n    remove: function remove() {\n      _events2.default.off(target, type, handler);\n    }\n  };\n}\n\nfunction isOverContainer(container, x, y) {\n  return !container || (0, _contains2.default)(container, document.elementFromPoint(x, y));\n}\n\nfunction isEvent(node, _ref) {\n  var clientX = _ref.clientX,\n      clientY = _ref.clientY;\n\n  var target = document.elementFromPoint(clientX, clientY);\n  return !!(0, _closest2.default)(target, '.rbc-event', node);\n}\n\nfunction getEventCoordinates(e) {\n  var target = e;\n\n  if (e.touches && e.touches.length) {\n    target = e.touches[0];\n  }\n\n  return {\n    clientX: target.clientX,\n    clientY: target.clientY,\n    pageX: target.pageX,\n    pageY: target.pageY\n  };\n}\n\nvar clickTolerance = 5;\nvar clickInterval = 250;\n\nvar Selection = function () {\n  function Selection(node) {\n    var _ref2 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n        _ref2$global = _ref2.global,\n        global = _ref2$global === undefined ? false : _ref2$global,\n        _ref2$longPressThresh = _ref2.longPressThreshold,\n        longPressThreshold = _ref2$longPressThresh === undefined ? 250 : _ref2$longPressThresh;\n\n    _classCallCheck(this, Selection);\n\n    this.container = node;\n    this.globalMouse = !node || global;\n    this.longPressThreshold = longPressThreshold;\n\n    this._listeners = Object.create(null);\n\n    this._handleInitialEvent = this._handleInitialEvent.bind(this);\n    this._handleMoveEvent = this._handleMoveEvent.bind(this);\n    this._handleTerminatingEvent = this._handleTerminatingEvent.bind(this);\n    this._keyListener = this._keyListener.bind(this);\n\n    // Fixes an iOS 10 bug where scrolling could not be prevented on the window.\n    // https://github.com/metafizzy/flickity/issues/457#issuecomment-254501356\n    this._onTouchMoveWindowListener = addEventListener('touchmove', function () {}, window);\n    this._onKeyDownListener = addEventListener('keydown', this._keyListener);\n    this._onKeyUpListener = addEventListener('keyup', this._keyListener);\n    this._addInitialEventListener();\n  }\n\n  Selection.prototype.on = function on(type, handler) {\n    var handlers = this._listeners[type] || (this._listeners[type] = []);\n\n    handlers.push(handler);\n\n    return {\n      remove: function remove() {\n        var idx = handlers.indexOf(handler);\n        if (idx !== -1) handlers.splice(idx, 1);\n      }\n    };\n  };\n\n  Selection.prototype.emit = function emit(type) {\n    for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    var result = void 0;\n    var handlers = this._listeners[type] || [];\n    handlers.forEach(function (fn) {\n      if (result === undefined) result = fn.apply(undefined, args);\n    });\n    return result;\n  };\n\n  Selection.prototype.teardown = function teardown() {\n    this.listeners = Object.create(null);\n    this._onTouchMoveWindowListener && this._onTouchMoveWindowListener.remove();\n    this._onInitialEventListener && this._onInitialEventListener.remove();\n    this._onEndListener && this._onEndListener.remove();\n    this._onMoveListener && this._onMoveListener.remove();\n    this._onKeyUpListener && this._onKeyUpListener.remove();\n    this._onKeyDownListener && this._onKeyDownListener.remove();\n  };\n\n  Selection.prototype.isSelected = function isSelected(node) {\n    var box = this._selectRect;\n\n    if (!box || !this.selecting) return false;\n\n    return objectsCollide(box, getBoundsForNode(node));\n  };\n\n  Selection.prototype.filter = function filter(items) {\n    var box = this._selectRect;\n\n    //not selecting\n    if (!box || !this.selecting) return [];\n\n    return items.filter(this.isSelected, this);\n  };\n\n  // Adds a listener that will call the handler only after the user has pressed on the screen\n  // without moving their finger for 250ms.\n\n\n  Selection.prototype._addLongPressListener = function _addLongPressListener(handler, initialEvent) {\n    var _this = this;\n\n    var timer = null;\n    var touchMoveListener = null;\n    var touchEndListener = null;\n    var handleTouchStart = function handleTouchStart(initialEvent) {\n      timer = setTimeout(function () {\n        cleanup();\n        handler(initialEvent);\n      }, _this.longPressThreshold);\n      touchMoveListener = addEventListener('touchmove', function () {\n        return cleanup();\n      });\n      touchEndListener = addEventListener('touchend', function () {\n        return cleanup();\n      });\n    };\n    var touchStartListener = addEventListener('touchstart', handleTouchStart);\n    var cleanup = function cleanup() {\n      if (timer) {\n        clearTimeout(timer);\n      }\n      if (touchMoveListener) {\n        touchMoveListener.remove();\n      }\n      if (touchEndListener) {\n        touchEndListener.remove();\n      }\n\n      timer = null;\n      touchMoveListener = null;\n      touchEndListener = null;\n    };\n\n    if (initialEvent) {\n      handleTouchStart(initialEvent);\n    }\n\n    return {\n      remove: function remove() {\n        cleanup();\n        touchStartListener.remove();\n      }\n    };\n  };\n\n  // Listen for mousedown and touchstart events. When one is received, disable the other and setup\n  // future event handling based on the type of event.\n\n\n  Selection.prototype._addInitialEventListener = function _addInitialEventListener() {\n    var _this2 = this;\n\n    var mouseDownListener = addEventListener('mousedown', function (e) {\n      _this2._onInitialEventListener.remove();\n      _this2._handleInitialEvent(e);\n      _this2._onInitialEventListener = addEventListener('mousedown', _this2._handleInitialEvent);\n    });\n    var touchStartListener = addEventListener('touchstart', function (e) {\n      _this2._onInitialEventListener.remove();\n      _this2._onInitialEventListener = _this2._addLongPressListener(_this2._handleInitialEvent, e);\n    });\n\n    this._onInitialEventListener = {\n      remove: function remove() {\n        mouseDownListener.remove();\n        touchStartListener.remove();\n      }\n    };\n  };\n\n  Selection.prototype._handleInitialEvent = function _handleInitialEvent(e) {\n    var _getEventCoordinates = getEventCoordinates(e),\n        clientX = _getEventCoordinates.clientX,\n        clientY = _getEventCoordinates.clientY,\n        pageX = _getEventCoordinates.pageX,\n        pageY = _getEventCoordinates.pageY;\n\n    var node = this.container(),\n        collides = void 0,\n        offsetData = void 0;\n\n    // Right clicks\n    if (e.which === 3 || e.button === 2 || !isOverContainer(node, clientX, clientY)) return;\n\n    if (!this.globalMouse && node && !(0, _contains2.default)(node, e.target)) {\n      var _normalizeDistance = normalizeDistance(0),\n          top = _normalizeDistance.top,\n          left = _normalizeDistance.left,\n          bottom = _normalizeDistance.bottom,\n          right = _normalizeDistance.right;\n\n      offsetData = getBoundsForNode(node);\n\n      collides = objectsCollide({\n        top: offsetData.top - top,\n        left: offsetData.left - left,\n        bottom: offsetData.bottom + bottom,\n        right: offsetData.right + right\n      }, { top: pageY, left: pageX });\n\n      if (!collides) return;\n    }\n\n    var result = this.emit('beforeSelect', this._initialEventData = {\n      isTouch: /^touch/.test(e.type),\n      x: pageX,\n      y: pageY,\n      clientX: clientX,\n      clientY: clientY\n    });\n\n    if (result === false) return;\n\n    switch (e.type) {\n      case 'mousedown':\n        this._onEndListener = addEventListener('mouseup', this._handleTerminatingEvent);\n        this._onMoveListener = addEventListener('mousemove', this._handleMoveEvent);\n        break;\n      case 'touchstart':\n        this._handleMoveEvent(e);\n        this._onEndListener = addEventListener('touchend', this._handleTerminatingEvent);\n        this._onMoveListener = addEventListener('touchmove', this._handleMoveEvent);\n        break;\n      default:\n        break;\n    }\n  };\n\n  Selection.prototype._handleTerminatingEvent = function _handleTerminatingEvent(e) {\n    var _getEventCoordinates2 = getEventCoordinates(e),\n        pageX = _getEventCoordinates2.pageX,\n        pageY = _getEventCoordinates2.pageY;\n\n    this.selecting = false;\n\n    this._onEndListener && this._onEndListener.remove();\n    this._onMoveListener && this._onMoveListener.remove();\n\n    if (!this._initialEventData) return;\n\n    var inRoot = !this.container || (0, _contains2.default)(this.container(), e.target);\n    var bounds = this._selectRect;\n    var click = this.isClick(pageX, pageY);\n\n    this._initialEventData = null;\n\n    if (click && !inRoot) {\n      return this.emit('reset');\n    }\n\n    if (click && inRoot) {\n      return this._handleClickEvent(e);\n    }\n\n    // User drag-clicked in the Selectable area\n    if (!click) return this.emit('select', bounds);\n  };\n\n  Selection.prototype._handleClickEvent = function _handleClickEvent(e) {\n    var _getEventCoordinates3 = getEventCoordinates(e),\n        pageX = _getEventCoordinates3.pageX,\n        pageY = _getEventCoordinates3.pageY,\n        clientX = _getEventCoordinates3.clientX,\n        clientY = _getEventCoordinates3.clientY;\n\n    var now = new Date().getTime();\n\n    if (this._lastClickData && now - this._lastClickData.timestamp < clickInterval) {\n      // Double click event\n      this._lastClickData = null;\n      return this.emit('doubleClick', {\n        x: pageX,\n        y: pageY,\n        clientX: clientX,\n        clientY: clientY\n      });\n    }\n\n    // Click event\n    this._lastClickData = {\n      timestamp: now\n    };\n    return this.emit('click', {\n      x: pageX,\n      y: pageY,\n      clientX: clientX,\n      clientY: clientY\n    });\n  };\n\n  Selection.prototype._handleMoveEvent = function _handleMoveEvent(e) {\n    var _initialEventData = this._initialEventData,\n        x = _initialEventData.x,\n        y = _initialEventData.y;\n\n    var _getEventCoordinates4 = getEventCoordinates(e),\n        pageX = _getEventCoordinates4.pageX,\n        pageY = _getEventCoordinates4.pageY;\n\n    var w = Math.abs(x - pageX);\n    var h = Math.abs(y - pageY);\n\n    var left = Math.min(pageX, x),\n        top = Math.min(pageY, y),\n        old = this.selecting;\n\n    this.selecting = true;\n    this._selectRect = {\n      top: top,\n      left: left,\n      x: pageX,\n      y: pageY,\n      right: left + w,\n      bottom: top + h\n    };\n\n    if (!old) {\n      this.emit('selectStart', this._initialEventData);\n    }\n\n    if (!this.isClick(pageX, pageY)) this.emit('selecting', this._selectRect);\n\n    e.preventDefault();\n  };\n\n  Selection.prototype._keyListener = function _keyListener(e) {\n    this.ctrl = e.metaKey || e.ctrlKey;\n  };\n\n  Selection.prototype.isClick = function isClick(pageX, pageY) {\n    var _initialEventData2 = this._initialEventData,\n        x = _initialEventData2.x,\n        y = _initialEventData2.y,\n        isTouch = _initialEventData2.isTouch;\n\n    return !isTouch && Math.abs(pageX - x) <= clickTolerance && Math.abs(pageY - y) <= clickTolerance;\n  };\n\n  return Selection;\n}();\n\n/**\n * Resolve the disance prop from either an Int or an Object\n * @return {Object}\n */\n\n\nfunction normalizeDistance() {\n  var distance = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n  if ((typeof distance === 'undefined' ? 'undefined' : _typeof(distance)) !== 'object') distance = {\n    top: distance,\n    left: distance,\n    right: distance,\n    bottom: distance\n  };\n\n  return distance;\n}\n\n/**\n * Given two objects containing \"top\", \"left\", \"offsetWidth\" and \"offsetHeight\"\n * properties, determine if they collide.\n * @param  {Object|HTMLElement} a\n * @param  {Object|HTMLElement} b\n * @return {bool}\n */\nfunction objectsCollide(nodeA, nodeB) {\n  var tolerance = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n\n  var _getBoundsForNode = getBoundsForNode(nodeA),\n      aTop = _getBoundsForNode.top,\n      aLeft = _getBoundsForNode.left,\n      _getBoundsForNode$rig = _getBoundsForNode.right,\n      aRight = _getBoundsForNode$rig === undefined ? aLeft : _getBoundsForNode$rig,\n      _getBoundsForNode$bot = _getBoundsForNode.bottom,\n      aBottom = _getBoundsForNode$bot === undefined ? aTop : _getBoundsForNode$bot;\n\n  var _getBoundsForNode2 = getBoundsForNode(nodeB),\n      bTop = _getBoundsForNode2.top,\n      bLeft = _getBoundsForNode2.left,\n      _getBoundsForNode2$ri = _getBoundsForNode2.right,\n      bRight = _getBoundsForNode2$ri === undefined ? bLeft : _getBoundsForNode2$ri,\n      _getBoundsForNode2$bo = _getBoundsForNode2.bottom,\n      bBottom = _getBoundsForNode2$bo === undefined ? bTop : _getBoundsForNode2$bo;\n\n  return !( // 'a' bottom doesn't touch 'b' top\n  aBottom - tolerance < bTop ||\n  // 'a' top doesn't touch 'b' bottom\n  aTop + tolerance > bBottom ||\n  // 'a' right doesn't touch 'b' left\n  aRight - tolerance < bLeft ||\n  // 'a' left doesn't touch 'b' right\n  aLeft + tolerance > bRight);\n}\n\n/**\n * Given a node, get everything needed to calculate its boundaries\n * @param  {HTMLElement} node\n * @return {Object}\n */\nfunction getBoundsForNode(node) {\n  if (!node.getBoundingClientRect) return node;\n\n  var rect = node.getBoundingClientRect(),\n      left = rect.left + pageOffset('left'),\n      top = rect.top + pageOffset('top');\n\n  return {\n    top: top,\n    left: left,\n    right: (node.offsetWidth || 0) + left,\n    bottom: (node.offsetHeight || 0) + top\n  };\n}\n\nfunction pageOffset(dir) {\n  if (dir === 'left') return window.pageXOffset || document.body.scrollLeft || 0;\n  if (dir === 'top') return window.pageYOffset || document.body.scrollTop || 0;\n}\nexports.default = Selection;"]},"metadata":{},"sourceType":"script"}